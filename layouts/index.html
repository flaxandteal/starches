{{ define "main" }}
{{- $js := resources.Get "map.ts" -}}
{{ $params := (dict "search_config" site.Params.search_config "is_production" hugo.IsProduction ) }}
{{ $sourceMap := cond hugo.IsProduction "" "inline" }}
{{ $opts := dict "sourceMap" $sourceMap "minify" hugo.IsProduction "target" "es2020" "params" $params }}
{{ $js = $js | js.Build $opts }}
{{ if hugo.IsProduction }}
  {{ $js = $js | fingerprint }}
{{ end }}
<script
  src="{{ $js.RelPermalink }}"
  {{ if hugo.IsProduction }}integrity="{{ $js.Data.Integrity }}"{{ end }}
  type="module"></script>
<link href="/pagefind/pagefind-modular-ui.css" rel="stylesheet">
<link href="https://unpkg.com/maplibre-gl@^5.3.1/dist/maplibre-gl.css" rel="stylesheet" />
<link href="{{ "css/breadcrumbs.css" | absURL }}" rel="stylesheet" />

<div class="govuk-body">
    <h1 class="govuk-heading-xl">Historic environment</h1>

    <div class="page-summary" role="presentation">
        <p>Search for heritage assets by typing 4 or more characters in the search box below and by using the map. Search will happen automatically, without pressing enter.</p>
        <p>If you have GPS, you can use the &target; button on the map to show nearby assets. <a href="./faq">More information</a> is available.</p>
    </div>

    <!-- <h3><a href="{{ site.Params.archesurl }}/search" data-arches-root="{{ site.Params.archesurl }}" class="govuk-back-link" id="arches-link">Advanced Search</a></h3> -->

    <!-- Breadcrumbs -->
    <div class="asset-breadcrumbs" id="search-breadcrumbs">
        <span id="breadcrumb-search-term"></span>
        <span id="breadcrumb-filters"></span>
        <span id="breadcrumb-geo"></span>
    </div>

    <p><a href="#search" id="jump-to-search">Jump to search</a></p>

    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset" aria-describedby="chosenRecord-hint">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          <h3 class="govuk-fieldset__heading govuk-heading-l">
            Which collection of records would you like to search?
          </h3>
        </legend>
        <div class="govuk-hint">
            <p>These are types of records that the department holds.</p>
        </div>
        <div id="filter"></div>
      </fieldset>
    </div>
    </div>

    <!-- div>Designations:
        <div id="filter-designation">
            Designation
        </div>
    </div -->

    <div id="map-row">
        <div id="search-column">
            <div id="search"></div>
            <div id="filter-warning" class="filter-warning-hidden">Filtering geographically, <a href="javascript:resetView()">reset</a> view to see all results</div>
            <div id="result-count" class="result-count"></div>
            <div id="instructions">
                <p>Search above to find assets.</p>

                <p>Each result has a <strong>View</strong> button to open it in this tab, and <strong>Open Tab</strong> to open the result in a new tab.</p>
            </div>
            <div id="results">
            </div>
        </div>

        <div id="map-column">
            <div id="filter-warning" class="filter-warning-hidden">Filtering geographically, <a href="javascript:resetView()">reset</a> view to see all results</div>
            <div id="map-container">
                <div id="map-cover">
                    <div id="map-instructions">
                        Search by typing 4+ characters into the <strong>searchbox</strong> or
                        <strong>zooming</strong> in to a small area - pinch the map or tap a grey dot to zoom.
                    </div>
                </div>
                <div id="map"></div>
            </div>
        </div>
    </div>

    <p class="acknowledgement">
    The display above uses the <a href="https://admin.opendatani.gov.uk/dataset/osni-open-data-largescale-boundaries-county-boundaries">OSNI Open Data County Boundaries</a> and the <a href="https://www.nisra.gov.uk/support/geography/data-zones-census-2021">NISRA Data Zones (2021)</a> under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">OGL license</a>.

</div>

    <script>
</script>

{{ end }}
